name: Check New Commit History

on:
  push:
    branches:
      - main # Change this to the branch of interest

jobs:
  check-commits:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Set up Git credentials
        run: |
          git config --global user.email "uiop0190@gmail.com"
          git config --global user.name "AwesomeYelim"
          git config --global credential.helper "store --file=.git-credentials"
          echo "https://github.com:${{ secrets.MDFILEINTERLOCK }}" > .git-credentials
        env:
          GITHUB_TOKEN: ${{ secrets.MDFILEINTERLOCK }}

      - name: Fetch Commit History
        id: commit-history
        run: |
          # Fetch the latest commit from the branch
          latest_commit=$(git log -1 --pretty=format:"%H")

          # Compare the latest commit with the previous commit
          if [ -z "$latest_commit" ]; then
            echo "No commits found."
          else
            echo "Latest commit: $latest_commit"
            # You can use $latest_commit to access the commit information as needed
          fi
        continue-on-error: true
