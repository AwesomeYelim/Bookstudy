# node + typescript ì ìš©í•˜ê¸° (typescript ì ìš©í•˜ê¸°)

## íƒ€ì… ì—†ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ íƒ€ì´í•‘ ì ìš©

Redux.js ë”°ë¼ì„œ ë§Œë“¤ê¸°

ğŸ“ js ë¼ì´ë¸ŒëŸ¬ë¦¬ì— type ì´ ì§€ì •ë˜ì–´ ìˆëŠ”ê²½ìš°ëŠ” ë‘ê°€ì§€ ê²½ìš°ë¡œ ë³¼ìˆ˜ìˆë‹¤.

1. javascript ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ë”°ë¡œ typescriptë¥¼ ë¶™ì´ëŠ” ë°©ë²•
2. ì•„ì˜ˆ typescript ë¡œ íƒ€ì´í•‘ -> Redux ì²˜ëŸ¼

- ìš°ì„  passport-localì˜ type ì„ ì§€ì›Œì¤€ë‹¤.

```
yarn remove @types/passport-local
```

- types/express ê²½ë¡œì— passport.local.d.ts íŒŒì¼ì„ ë§Œë“ í›„ ë‹¤ìŒì„ ì ìš©(ì‹¤ì œë¡œ ì“°ëŠ” ì •ë„ì—ì„œë§Œ íƒ€ì´í•‘ í•´ì£¼ëŠ”ê²ƒì´ ì¢‹ë‹¤.) - declare module "passport-local"ë¡œ ê°ì‹¸ ambient ëª¨ë“ˆë¡œ ë§Œë“¤ì–´ì¤Œ 

```ts
declare module "passport-local" {
  // toplevel ì´ì–´ì•¼ í•¨
  import { Strategy as PassportStrategy } from "passport"; // ì•ˆìª½ì— import ì‹œì¼œì¤˜ì•¼í•¨
  export interface IVerifyOptions {
    [key: string]: string;
  }

  export interface IStrategyOptions {
    usernameFiled: string;
    passwordFiled: string;
  }
  // ì—¬ê¸°ì„œëŠ” ìƒëŒ€ ê²½ë¡œë¡œ import í•´ì˜¬ìˆ˜ ì—†ìŒ
  export interface Done {
    // ì•ì— ì¸ìê°€ optional ì¸ê²½ìš° ë’¤ì— ì¸ìê°€ required ì¼ìˆ˜ ì—†ìŒ
    (error: Error | any, user?: any, options?: IVerifyOptions): void;
  }
  export interface VerifyFunction {
    (username: string, password: string, done: Done): void | Promise<any>;
  }
  export class Strategy extends PassportStrategy {
    constructor(options: IStrategyOptions, verify: VerifyFunction);
  }
}
```

- ë‹¤ìŒê³¼ ê°™ì€ íƒ€ì… ë§ê³ ë„ ë‹¤ë¥¸ ì¸ìê°’ì´ í•„ìš”í•œ ê²½ìš° ì˜¤ë²„ë¡œë”©ì„ í†µí•œ íƒ€ì…í™•ì¥ì„ ì§„í–‰í•´ì£¼ì–´ë„ ì¢‹ë‹¤.

ğŸš© declare ëŠ” ì–¸ì œ ì‚¬ìš©í• ê¹Œ ?
- ì „ì—­ìœ¼ë¡œ íƒ€ì… ì‚¬ìš©ì‹œ(ëª¨ë“ˆì•ˆì— ìˆì„ì‹œì—ëŠ” êµ³ì´ declare í•  í•„ìš” x)

- ë§Œì•½ open source ì— ê³µìœ í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ê²‰ì— ê°ìŒŒë˜ declare module ì„ ì—†ì• ê³  ì‚¬ìš©í•  'Strategy' ë§Œ declare ì‹œì¼œì¤€ë‹¤.

```ts

  import { Strategy as PassportStrategy } from "passport"; 
  export interface IVerifyOptions {
    [key: string]: string;
  }

  export interface IStrategyOptions {
    usernameFiled: string;
    passwordFiled: string;
  }
  export interface Done {
    (error: Error | any, user?: any, options?: IVerifyOptions): void;
  }
  export interface VerifyFunction {
    (username: string, password: string, done: Done): void | Promise<any>;
  }
  declare class Strategy extends PassportStrategy {
    constructor(options: IStrategyOptions, verify: VerifyFunction);
  }

```
